---
title: "Predicting the Water Temperature of Toronto Beaches"
author: Richard Guo
thanks: "Code and data are available at: [https://github.com/Richard-Guo1/predicting-beach-water-temperature](https://github.com/Richard-Guo1/predicting-beach-water-temperature)."
date: today
date-format: long
abstract: "This paper analyzes the efficacy of using easily accessible weather information to predict the water temperature at a beach. Data recorded by City of Toroto staff stationed at various beachfronts between mid May and mid September is used. A linear regression model was used with air temperature, recent rainfall, and the location of the beach as the causal predictors."
format: pdf
number-sections: true
toc: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(arrow)
library(knitr)
library(modelsummary)
beachData <- read_parquet(here::here("data/02-analysis_data/analysis_data.parquet"))
```


# Introduction



My estimand is the efficacy of using easily accessible weather information (such as from watching a news channel) to predict the temperature of the water at a beach. By analyzing this dataset, I aim to replicate a portion of the decision making process for when people decide to swim at a beach. 

Results paragraph   

Why it matters paragraph

Telegraphing paragraph: The remainder of this paper is structured as follows. @sec-data discusses how the dataset was obtained and analyzed. @sec-model 





# Data {#sec-data}

## Overview

The data used in this paper is derived from Open Data Toronto and is read into this paper through the opendatatoronto library [@opendatatoronto]. The particular data set used to analyze the observations made by city staff on the conditions of all guarded Toronto beaches between the months of May and September [@beaches]. All the data analysis was done through R [@citeR] with the aid of the following packages: tidyverse [@tidyverse], arrow [@arrow], fastDummies[@fastdummies], here [@here], dplyr [@dplyr], tibble [@tibble], janitor [@janitor], ggplot2 [@ggplot], and knitr [@knitr]. 

## Measurement
	
Some paragraphs about how we go from a phenomena in the world to an entry in the dataset.

## Outcome variable

Add graphs, tables and text. Use sub-sub-headings for each outcome variable or update the subheading to be singular.



```{r}
#| label: fig-water-temp-year
#| fig-cap: Water Temperature Quantiles by Year
#| echo: false

ggplot(beachData, aes(x = year, y = waterTemp, group = year)) +
  geom_boxplot(alpha = 0.8) +
  theme_minimal() + 
  labs(x = "Year", y = "Water Temperature (째C)")
```

Talk more about it.

And also planes (@fig-temps). (You can change the height and width, but don't worry about doing that until you have finished every other aspect of the paper - Quarto will try to make it look nice and the defaults usually work well once you have enough text.)


Talk way more about it. 

## Predictor variables

The chosen predictor variables from the dataset are the beach name, the air temperature, and the presence of rain. The rain amount category may have provided more accurate estimates, but was dropped due to lack of proper documentation, discussed more in 

```{r}
#| label: fig-temps
#| fig-cap: Relationship between Air Temperature and Water Temperature
#| echo: false
#| warning: false
#| message: false

beachData |> 
  ggplot(aes(x = airTemp, y = waterTemp)) +
  geom_point(alpha = 0.8) +
  theme_minimal() +
  labs(x = "Air Temperature (째C)",
       y = "Water Temperature (째C)")
```

```{r}
#| label: fig-beach
#| fig-cap: Water Temperature Quantiles by Beach
#| echo: false
#| warning: false
#| message: false

beachData |> 
  ggplot(aes(x = beachName, y = waterTemp, group = beachName)) +
  geom_boxplot() +
  theme_minimal() +
  labs(x = "Beach",
       y = "Water Temperature (째C)") +
  coord_flip()

```



# Model {#sec-model}


## Model set-up



### Model justification



# Results

Our results are summarized in @tbl-modelresults.

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false


first_model <-
  readRDS(file = here::here("models/first_model.rds"))
```

```{r}
#| echo: false
#| eval: true
#| label: tbl-modelresults
#| tbl-cap: "Explanatory models of water temperature based on air temperature, rain, and location"
#| warning: false
#| 

modelsummary(
  list("Water Temperature" =first_model),
  gof_omit = 'AIC|BIC'
)
```


# Discussion

## Beaches, Outdoor Pools, and Indoor Pools {#sec-first-point}



## Second discussion point



## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage

\appendix

# Appendix {-}


# Additional data details

# Model details {#sec-model-details}


\newpage


# References


